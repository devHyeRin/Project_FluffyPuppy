<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">

<head>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
</head>

<th:block layout:fragment="css">
    <link th:href="@{/css/item/itemDetail.css}" rel="stylesheet">
</th:block>

<th:block layout:fragment="script">
    <script th:src="@{/js/item/itemDetail.js}"></script>
</th:block>

<div layout:fragment="content">
    <div class="prod-wrap">
        <div class="mb-4">
            <ul class="breadcrumb bg-transparent p-0">
                <li class="breadcrumb-item"><a href="/"><i class="material-symbols-outlined" style="font-size: 20px;">home</i></a></li>
                <li class="breadcrumb-item active">상품 상세</li>
            </ul>
        </div>

        <input type="hidden" id="itemId" th:value="${item.id}">

        <div class="row">
            <div class="col-md-6 position-relative">
                <div th:if="${!item.itemSellStatus.isSell()}" class="soldout-label">
                    <img src="/img/sold_out.png" alt="Sold Out" class="soldout-img">
                </div>
                <img th:src="${item.itemImgDtoList[0].imgUrl}" class="repImg" th:alt="${item.itemNm}">
            </div>

            <div class="col-md-6 wd50">
                <h2 class="fw-bold" th:text="${item.itemNm}"></h2>
                <hr>
                <div class="py-3">
                    <h3 class="text-danger fw-bold">
                        <input type="hidden" th:value="${item.price}" id="price">
                        <span class="item-price" th:text="${item.price}"></span>
                    </h3>
                    <p class="text-muted small">무료배송</p>
                </div>
                <hr>

                <div class="mgt-50 text-end">
                    <div class="input-group quantity-container mb-3 ms-auto">
                        <span class="input-group-text">수량</span>
                        <input type="number" name="count" id="count" class="form-control" value="1" min="1">
                    </div>
                    <div class="mb-4">
                        <h5 class="text-muted mb-1">총 결제 금액</h5>
                        <h2 id="totalPrice" class="text-danger fw-bold item-price"></h2>
                    </div>
                </div>

                <div class="text-end mt-4">
                    <th:block th:if="${item.itemSellStatus.isSell()}">
                        <button type="button" class="btn btn-outline-secondary btn-lg px-4 me-2" onclick="addCart()">장바구니 담기</button>
                        <button type="button" class="btn btn-primary btn-lg px-5 fw-bold" style="background-color: #f59898; border: none;" onclick="order()">주문하기</button>
                    </th:block>
                    <button th:unless="${item.itemSellStatus.isSell()}" type="button" class="btn btn-danger btn-lg w-100">재입고 예정</button>
                </div>
            </div>
        </div>

        <div class="item-menu-nav">
            <ul class="detail-nav">
                <li onclick="scrollToSection('productDetailsSection')">상품상세</li>
                <li onclick="scrollToSection('shippingInfoSection')">배송/교환/반품 안내</li>
            </ul>
        </div>

        <div id="productDetailsSection" class="py-5">
            <h4 class="fw-bold mb-4" style="color: #d27878;">Detail <i class="material-symbols-outlined align-middle">check_circle</i></h4>
            <p class="lead" th:text="${item.itemDetail}"></p>
            <div th:each="itemImg : ${item.itemImgDtoList}" class="text-center mt-3">
                <img th:if="${not #strings.isEmpty(itemImg.imgUrl)}" th:src="${itemImg.imgUrl}" class="img-dtl-size rounded shadow-sm">
            </div>
        </div>

    </div>
</div>
</html>